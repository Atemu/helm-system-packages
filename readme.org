#+TITLE: Helm-System-Packages

* Introduction

Helm-System-Packages is a Helm interface to the package manager of your operating system.

Start ~helm-system-packages~ to list all available packages (with installed
packages as well as dependencies displayed in their own respective face).
Fuzzy-search, mark and execute the desired action over any set of packages:

- Install
- Uninstall
- Display packages details or insert details at point
- Find files
- ...

Some package managers come with their specific actions and even specific sources, e.g. Portage's USE flags.

* Usage

There is only one entry point: ~helm-system-packages~.

Use the persistent action to view the details of the marked packages.

Most actions can be called with a prefix argument to insert the result at point.

* Motivation

Most of the package managers GUIs out there do not provide much efficiency over their commandline counterparts.

The commandline workflow is not ideal however:

1. Search for local packages.
2. Package missing?  Search for remote packages.
3. List is too long?  Pipe through a pager.
4. (Un)install the desired package by writing the searched package names again.

With Helm all those actions get factored into one.
Helm sessions can also be resumed.

* Roadmap
** DONE Different face for dependencies.
** DONE Use thing at point as a default value.
** REVIEW Add column with description.
That would allow for matching over description as well.
** TODO Option to display fullscreen (like helm-top)
Mostly useful if we add a "description" column.
** DONE Use long switches whenever possible.
** DONE Normalize action names.
Not "Emerge" but "Install".
Some actions are specific to some package managers however, e.g. "emerge pretend".
** DONE All actions should support multiple candidates.
Centralize commands into one ~helm-system-packages-run~ or something like that.
** TODO Add defcustom for commands.
To allow different command switches, e.g. the ~--needed~ switch for pacman, or ~--oneshot~ for emerge.

Maybe ~--oneshot~ would deserve a separate action.

~apt-get~ has ~remove~ and ~purge~.  I think ~purge~ is ill-designed, but maybe we could trigger it with ~C-u~?

~C-u~ could be used to force installation of already installed packages.
~C-u~ could be used to uninstall unrequired dependencies.
** DONE Output to Eshell only? Comint mode?
** TODO Factor all "info" actions?
We can add Org subsections for files, dependencies, etc.
Those sections should be folded by default.

We probably still need specific "info" actions to insert at point.
** Use bindings reflecting helm-list-elisp-packages
** DONE Add "find-files" command: a Helm-find-files session over the file list of the marked packages.
** TODO Add helm-find-files keymap to "Find files"
** TODO Browse URL should process directly when there is only one entry.
** TODO Test without eshell-tramp.
If it does not work, either load it or fall back to "*sudo".
** TODO "Refresh" action should be a command, really.
** TODO Dependencies/Reverse dependencies should fire up a new Helm-System-Packages session.
** Add xbps (Void Linux) support
** Add guix support
** Add homebrew support

* References
- https://wiki.voidlinux.eu/Rosetta_stone
- https://wiki.archlinux.org/index.php/Pacman/Rosetta
- https://github.com/jabranham/system-packages
